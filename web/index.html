<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book2Vision | Transform Your Reading</title>
    <meta name="description" content="Transform digital books into immersive multimedia experiences with AI.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=12">
</head>

<body>

    <!-- Background Elements -->
    <div class="bg-orb orb-1" aria-hidden="true"></div>
    <div class="bg-orb orb-2" aria-hidden="true"></div>
    <div class="bg-grid" aria-hidden="true"></div>

    <!-- Navbar -->
    <nav class="navbar glass" aria-label="Main navigation">
        <div class="logo">Book2Vision <span class="badge">Beta</span></div>
        <div class="hamburger" onclick="toggleMenu()" aria-label="Toggle menu" role="button" tabindex="0">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="nav-links">
            <a href="index.html" class="active" aria-current="page">Home</a>
            <a href="library.html">Library</a>
            <a href="about.html">About us</a>
        </div>
    </nav>

    <!-- Toast Notification Container -->
    <div id="toast-container" aria-live="polite"></div>

    <main>
        <!-- Hero / Upload Section -->
        <section id="hero" class="container fade-in">
            <div class="hero-content">
                <h1>Experience Books <br> Like Never Before</h1>
                <p>Turn any PDF into an immersive multimedia journey with AI-powered narration and visualization.</p>

                <div class="upload-zone glass" id="drop-zone" role="button" tabindex="0" aria-label="Upload book area">
                    <div class="upload-icon" aria-hidden="true">üìÇ</div>
                    <h3>Drag & Drop your book here</h3>
                    <p>Supports PDF, EPUB, TXT</p>
                    <input type="file" id="file-input" hidden accept=".pdf,.epub,.txt" aria-label="File upload">
                    <button class="btn-primary" onclick="document.getElementById('file-input').click()">Browse
                        Files</button>
                </div>

                <div id="upload-status" class="hidden fade-in" aria-live="polite">
                    <!-- Custom Camping Loader -->
                    <div class="scene">
                        <div class="forest">
                            <div class="tree tree1">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                            </div>

                            <div class="tree tree2">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                                <div class="branch branch-bottom"></div>
                            </div>

                            <div class="tree tree3">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                                <div class="branch branch-bottom"></div>
                            </div>

                            <div class="tree tree4">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                                <div class="branch branch-bottom"></div>
                            </div>

                            <div class="tree tree5">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                                <div class="branch branch-bottom"></div>
                            </div>

                            <div class="tree tree6">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                                <div class="branch branch-bottom"></div>
                            </div>

                            <div class="tree tree7">
                                <div class="branch branch-top"></div>
                                <div class="branch branch-middle"></div>
                                <div class="branch branch-bottom"></div>
                            </div>
                        </div>

                        <div class="tent">
                            <div class="roof"></div>
                            <div class="roof-border-left">
                                <div class="roof-border roof-border1"></div>
                                <div class="roof-border roof-border2"></div>
                                <div class="roof-border roof-border3"></div>
                            </div>
                            <div class="entrance">
                                <div class="door left-door">
                                    <div class="left-door-inner"></div>
                                </div>
                                <div class="door right-door">
                                    <div class="right-door-inner"></div>
                                </div>
                            </div>
                        </div>

                        <div class="floor">
                            <div class="ground ground1"></div>
                            <div class="ground ground2"></div>
                        </div>

                        <div class="fireplace">
                            <div class="support"></div>
                            <div class="support"></div>
                            <div class="bar"></div>
                            <div class="hanger"></div>
                            <div class="smoke"></div>
                            <div class="pan"></div>
                            <div class="fire">
                                <div class="line line1">
                                    <div class="particle particle1"></div>
                                    <div class="particle particle2"></div>
                                    <div class="particle particle3"></div>
                                    <div class="particle particle4"></div>
                                </div>
                                <div class="line line2">
                                    <div class="particle particle1"></div>
                                    <div class="particle particle2"></div>
                                    <div class="particle particle3"></div>
                                    <div class="particle particle4"></div>
                                </div>
                                <div class="line line3">
                                    <div class="particle particle1"></div>
                                    <div class="particle particle2"></div>
                                    <div class="particle particle3"></div>
                                    <div class="particle particle4"></div>
                                </div>
                            </div>
                        </div>

                        <div class="time-wrapper">
                            <div class="time">
                                <div class="day"></div>
                                <div class="night">
                                    <div class="moon"></div>
                                    <div class="star star1 star-big"></div>
                                    <div class="star star2 star-big"></div>
                                    <div class="star star3 star-big"></div>
                                    <div class="star star4"></div>
                                    <div class="star star5"></div>
                                    <div class="star star6"></div>
                                    <div class="star star7"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upload progress bar -->
                    <div class="upload-progress-container" role="progressbar" aria-valuemin="0" aria-valuemax="100"
                        aria-valuenow="0">
                        <div class="upload-progress-bar" id="upload-progress-bar"></div>
                    </div>
                    <p class="upload-progress-text" id="upload-progress-text">0%</p>

                    <p style="margin-top: 1rem; font-weight: 500;" id="upload-status-title">Uploading your book...</p>
                    <p class="status-detail" id="status-detail">Preparing file...</p>
                </div>
            </div>
        </section>

        <!-- Dashboard (Hidden initially) -->
        <section id="dashboard" class="container hidden fade-in" aria-label="Book Dashboard">

            <!-- Top Bar: Book Info & Settings -->
            <div class="dashboard-header glass">
                <div class="book-info">
                    <h2 id="book-title">Book Title</h2>
                    <p id="book-author">Author Name</p>
                </div>

                <div class="controls-group">
                    <div class="control-item">
                        <label for="audio-provider">Audio Provider</label>
                        <select id="audio-provider" class="glass-input">
                            <option value="deepgram">Deepgram (Fast)</option>
                            <option value="elevenlabs">ElevenLabs (High Quality)</option>
                            <option value="inbuilt">Inbuilt (Free)</option>
                        </select>
                    </div>

                    <div class="control-item">
                        <label for="style-select">Art Style</label>
                        <select id="style-select" class="glass-input">
                            <option value="storybook">Storybook</option>
                            <option value="cinematic">Cinematic</option>
                            <option value="anime">Anime</option>
                            <option value="watercolor">Watercolor</option>
                            <option value="cyberpunk">Cyberpunk</option>
                            <option value="fantasy">Fantasy</option>
                        </select>
                    </div>

                    <button class="btn-icon" onclick="toggleSettings()" title="Advanced Settings"
                        aria-label="Advanced Settings">‚öôÔ∏è</button>
                </div>


            </div>

            <div class="dashboard-grid">
                <!-- Left: Entities -->
                <div class="panel-left glass">
                    <div class="panel-header">
                        <h3>Characters</h3>
                        <span class="badge-count" id="entity-count">0</span>
                    </div>
                    <div id="entities-list" class="entities-grid" aria-label="List of characters">
                        <!-- Entities injected here -->
                        <div class="skeleton-card" aria-hidden="true"></div>
                        <div class="skeleton-card" aria-hidden="true"></div>
                        <div class="skeleton-card" aria-hidden="true"></div>
                    </div>
                </div>

                <!-- Center: Audio Player & Q&A -->
                <div class="panel-center">
                    <!-- Audio Player -->
                    <div class="audio-player-ui glass">
                        <div class="bg-waveform" aria-hidden="true">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="player-header">
                            <h3>Audiobook Player</h3>
                            <div class="header-controls" style="display: flex; gap: 0.5rem;">
                                <button id="btn-audio" class="btn-sm">
                                    <span class="icon" aria-hidden="true">üéß</span> Generate Audiobook
                                </button>
                                <button id="btn-podcast" class="btn-sm btn-podcast">
                                    <span class="icon" aria-hidden="true">üéôÔ∏è</span> Generate Podcast
                                </button>
                            </div>
                        </div>

                        <!-- Podcast Player (Hidden initially) -->
                        <div id="podcast-player-ui" class="podcast-player hidden fade-in" aria-label="Podcast Player">
                            <div class="podcast-header">
                                <span style="font-size: 1.2rem;" aria-hidden="true">üéôÔ∏è</span>
                                <div style="flex:1; margin-left: 0.5rem;">
                                    <div style="font-weight: 700; font-size: 0.9rem;">Booked & Busy</div>
                                    <div style="font-size: 0.75rem; opacity: 0.8;">with Jax & Emma</div>
                                </div>
                                <button class="btn-icon-sm" onclick="closePodcast()"
                                    aria-label="Close Podcast">‚úï</button>
                            </div>
                            <div class="podcast-visualizer" aria-hidden="true">
                                <div class="speaker-avatar" id="podcast-avatar">üé§</div>
                                <div class="podcast-wave">
                                    <span></span><span></span><span></span><span></span><span></span>
                                </div>
                            </div>
                            <div class="podcast-transcript" id="podcast-transcript" aria-live="polite">
                                Generating script...
                            </div>
                        </div>

                        <div class="audio-visualizer" aria-hidden="true">
                            <!-- Simple CSS visualizer bars -->
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                            <div class="bar"></div>
                        </div>

                        <div class="progress-container" id="progress-container" role="slider"
                            aria-label="Audio Progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"
                            tabindex="0">
                            <div class="progress-bar" id="audio-progress"></div>
                            <div class="progress-hover" id="progress-hover"></div>
                        </div>

                        <div class="time-display">
                            <span id="current-time">0:00</span> / <span id="total-time">0:00</span>
                        </div>

                        <div class="player-controls">
                            <button class="btn-control" onclick="skip(-15)" aria-label="Rewind 15 seconds">‚Ü∫
                                15s</button>
                            <button class="btn-play" id="btn-play-pause" aria-label="Play or Pause">‚ñ∂</button>
                            <button class="btn-control" onclick="skip(15)" aria-label="Forward 15 seconds">15s
                                ‚Üª</button>
                        </div>

                        <!-- Hidden audio element for logic -->
                        <audio id="audio-player" hidden></audio>
                    </div>

                    <!-- Q&A Section -->
                </div>

                <!-- Right: Generated Image -->
                <div class="panel-image glass">
                    <div class="player-header">
                        <h3>Visuals</h3>
                        <button id="btn-visuals" class="btn-sm">
                            <span class="icon" aria-hidden="true">üé®</span> Generate Visuals
                        </button>
                    </div>
                    <div class="image-display" id="image-display" aria-label="Generated Visuals">
                        <div class="placeholder-content">
                            <div class="icon-large" aria-hidden="true">üñºÔ∏è</div>
                            <p>Generate visuals to see the story come to life.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chatbot Widget -->
        <div id="chatbot-widget" class="chatbot-window glass hidden" aria-label="Chatbot">
            <div class="chatbot-header">
                <h3>Ask Book</h3>
                <button class="btn-icon" aria-label="Close Chatbot">‚úï</button>
            </div>
            <div class="qa-chat-container" id="qa-chat-container" aria-live="polite">
                <div class="chat-message system">
                    Ask any question about the plot, characters, or themes!
                </div>
            </div>
            <div class="qa-suggestions" id="qa-suggestions"></div>
            <div class="qa-input-wrapper">
                <input type="text" id="qa-input" placeholder="Ask a question..." class="glass-input qa-input"
                    autocomplete="off" aria-label="Chat input">
                <button class="btn-send" id="btn-send-qa" aria-label="Send message">‚û§</button>
            </div>
        </div>

        <button id="chatbot-fab" class="chatbot-fab btn-primary hidden" aria-label="Open Chatbot">
            üí¨
        </button>
    </main>

    <script src="script.js?v=3"></script>
</body>

</html>